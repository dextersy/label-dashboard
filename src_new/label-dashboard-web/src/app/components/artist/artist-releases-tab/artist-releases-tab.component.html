<div class="artist-releases-tab">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5>Artist Releases</h5>
      <div class="btn-group" *ngIf="artist">
        <button *ngIf="isAdmin" 
                class="btn btn-primary btn-sm" 
                (click)="navigateToCreateRelease()"
                title="Create new release">
          <i class="fas fa-plus"></i> Create Release
        </button>
        <button class="btn btn-outline-primary btn-sm" 
                (click)="navigateToSubmitRelease()"
                title="Submit release for review">
          <i class="fas fa-upload"></i> Submit Release
        </button>
      </div>
    </div>
    <div class="card-body">
      
      <div *ngIf="loading" class="text-center loading">
        <div class="loading-dots">
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
      
      <div *ngIf="!loading && releases.length === 0" class="text-center text-muted empty-releases">
        <i class="fa fa-music fa-3x"></i>
        <p>No releases found</p>
        <small>This artist hasn't released any music yet.</small>
      </div>
      
      <div *ngIf="!loading && releases.length > 0" class="releases-table-container">
        <div class="table-responsive">
          <table class="table releases-table">
            <thead>
              <tr>
                <th>Cover</th>
                <th>Catalog #</th>
                <th>Title</th>
                <th>Release Date</th>
                <th>Status</th>
                <th *ngIf="isAdmin">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let release of releases">
                <td class="cover-cell">
                  <img [src]="getCoverArtUrl(release.cover_art)" 
                       [alt]="release.title + ' cover'"
                       class="cover-thumbnail">
                </td>
                <td class="catalog-cell">
                  <span class="catalog-number">{{ release.catalog_no }}</span>
                </td>
                <td class="title-cell">
                  <div class="release-title">{{ release.title }}</div>
                  <div *ngIf="release.description" class="release-description">
                    {{ release.description }}
                  </div>
                </td>
                <td class="date-cell">
                  {{ formatDate(release.release_date) }}
                </td>
                <td class="status-cell">
                  <span class="badge" [class]="getStatusClass(release.status)">
                    <i class="fa" [ngClass]="getStatusIcon(release.status)"></i>
                    {{ release.status }}
                  </span>
                </td>
                <td *ngIf="isAdmin" class="actions-cell">
                  <button class="btn btn-sm btn-primary" 
                          (click)="onEditRelease(release)"
                          [disabled]="loadingReleaseDetails"
                          title="Edit Release">
                    <i class="fa fa-spinner fa-spin" *ngIf="loadingReleaseDetails"></i>
                    <i class="fa fa-edit" *ngIf="!loadingReleaseDetails"></i>
                    {{ loadingReleaseDetails ? 'Loading...' : 'Edit' }}
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
    </div>
  </div>

  <!-- Edit Release Dialog -->
  <app-edit-release-dialog
    [isVisible]="showEditDialog"
    [artist]="artist"
    [editingRelease]="selectedRelease"
    (close)="onEditDialogClose()"
    (releaseUpdated)="onReleaseUpdated($event)"
    (alertMessage)="alertMessage.emit($event)">
  </app-edit-release-dialog>
</div>