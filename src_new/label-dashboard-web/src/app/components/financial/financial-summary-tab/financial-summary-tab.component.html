<div class="row" *ngIf="summary">
  <div class="col-md-3">
    <div class="current-balance-section text-center p-4">
      <h2 class="balance-title">Current Balance</h2>
      <h1 class="balance-amount" [ngClass]="getAmountClass(summary.currentBalance)">{{ formatCurrency(summary.currentBalance) }}</h1>
      <p class="balance-subtitle" *ngIf="!isAdmin">This is your total earned royalties less payments and advances made to you. Once this reaches your set payout point, this will be transferred to you on the 15th of the month.</p>
      <button class="btn btn-primary pay-now-btn" 
              *ngIf="isAdmin"
              (click)="onPayNow()"
              [disabled]="summary.currentBalance <= 0">
        <i class="fas fa-credit-card me-2"></i>Pay Now
      </button>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-center financial-card">
      <div class="card-body">
        <h3 class="card-title">Total Earnings</h3>
        <h2 [ngClass]="getAmountClass(summary.totalEarnings)">{{ formatCurrency(summary.totalEarnings) }}</h2>
        <button class="btn btn-secondary btn-sm" 
                (click)="viewEarningsDetails.emit()">
          View Details
        </button>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-center financial-card">
      <div class="card-body">
        <h3 class="card-title">Total Royalties</h3>
        <h2 [ngClass]="getAmountClass(summary.totalRoyalties)">{{ formatCurrency(summary.totalRoyalties) }}</h2>
        <button class="btn btn-secondary btn-sm" 
                (click)="viewRoyaltiesDetails.emit()">
          View Details
        </button>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-center financial-card">
      <div class="card-body">
        <h3 class="card-title">Total Payments</h3>
        <h2 [ngClass]="getAmountClass(summary.totalPayments)">{{ formatCurrency(summary.totalPayments) }}</h2>
        <button class="btn btn-secondary btn-sm" 
                (click)="viewPaymentsDetails.emit()">
          View Details
        </button>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h4>Latest Earnings</h4>
      </div>
      <div class="card-body">
        <app-earnings-table [earnings]="latestEarnings" [showHeader]="false"></app-earnings-table>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h4>Latest Royalties</h4>
      </div>
      <div class="card-body">
        <app-royalties-table [royalties]="latestRoyalties" [showHeader]="false"></app-royalties-table>
      </div>
    </div>
  </div>
</div>