<div class="card">
  <div class="card-header">
    <h5 class="mb-0">
      <i class="fas fa-ticket-alt me-2"></i>Ticket Types
    </h5>
  </div>
  <div class="card-body">
    <div *ngIf="loading" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
    
    <div *ngIf="!loading">
      <!-- Existing Ticket Types -->
      <div *ngFor="let ticketType of ticketTypes; let i = index" class="ticket-type-item mb-3">
        <div class="row align-items-center">
          <div class="col-md-5">
            <div class="mb-2">
              <label class="form-label small">Name</label>
              <input 
                type="text" 
                class="form-control" 
                [(ngModel)]="ticketType.name"
                [disabled]="!isAdmin"
                placeholder="Enter ticket type name">
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-2">
              <label class="form-label small">Price (₱)</label>
              <input 
                type="number" 
                class="form-control" 
                [(ngModel)]="ticketType.price"
                [disabled]="!isAdmin"
                min="0"
                step="0.01"
                placeholder="0.00">
            </div>
          </div>
          <div class="col-md-3">
            <div class="d-flex">
              <button 
                *ngIf="isAdmin && ticketType.id" 
                type="button" 
                class="btn btn-link p-1 text-primary"
                [disabled]="updating"
                (click)="updateTicketType(ticketType)"
                title="Save changes"
                style="text-decoration: none; font-size: 14px;">
                <i class="fas fa-save"></i>
              </button>
              <button 
                *ngIf="isAdmin && ticketTypes.length > 1"
                type="button" 
                class="btn btn-link p-1 text-danger"
                [disabled]="deleting"
                (click)="deleteTicketType(ticketType, i)"
                title="Delete ticket type"
                style="text-decoration: none; font-size: 14px;">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Add New Ticket Type -->
      <div *ngIf="isAdmin" class="border-top pt-3 mt-3">
        <h6>Add New Ticket Type</h6>
        <div class="row align-items-end">
          <div class="col-md-5">
            <div class="mb-2">
              <label class="form-label small">Name</label>
              <input 
                type="text" 
                class="form-control" 
                [(ngModel)]="newTicketType.name"
                placeholder="Enter ticket type name">
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-2">
              <label class="form-label small">Price (₱)</label>
              <input 
                type="number" 
                class="form-control" 
                [(ngModel)]="newTicketType.price"
                min="0"
                step="0.01"
                placeholder="0.00">
            </div>
          </div>
          <div class="col-md-3">
            <button 
              type="button" 
              class="btn btn-success btn-sm"
              [disabled]="creating || !newTicketType.name.trim() || newTicketType.price < 0"
              (click)="createTicketType()">
              <i class="fas fa-plus me-1"></i>Add Type
            </button>
          </div>
        </div>
      </div>

      <!-- Warning about at least one ticket type -->
      <div *ngIf="isAdmin && ticketTypes.length < 1" class="alert alert-warning mt-3">
        <i class="fas fa-exclamation-triangle me-2"></i>
        <strong>Important:</strong> Events must have at least one ticket type.
      </div>
    </div>
  </div>
</div>