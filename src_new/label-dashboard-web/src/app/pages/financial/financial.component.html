<div class="financial-page">
  <div class="container-fluid">
    
    <!-- Artist Selection -->
    <div class="row">
      <div class="col-12">
        <app-artist-selection 
          [currentArtist]="selectedArtist"
          (artistSelected)="onArtistSelected($event)">
        </app-artist-selection>
      </div>
    </div>
    
    <!-- Main Content -->
    <div class="row" *ngIf="selectedArtist">
      <div class="col-12">
        
        <!-- Tab Navigation -->
        <div class="card tab-navigation" style="padding: 20px;">
          <ul class="nav nav-pills">
            <li class="nav-item" *ngFor="let tab of tabs" [hidden]="!shouldShowTab(tab)">
              <a class="nav-link" 
                 [class]="getTabClass(tab.id)"
                 (click)="setActiveTab(tab.id)"
                 role="tab">
                <i class="fa" [class]="tab.icon"></i>
                {{ tab.label }}
              </a>
            </li>
          </ul>
          
          <!-- Tab Content -->
          <div class="tab-content">
            
            <!-- Summary Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'summary'" *ngIf="activeTab === 'summary'">
              <app-financial-summary-tab
                [summary]="summary"
                [latestEarnings]="latestEarnings"
                [latestRoyalties]="latestRoyalties"
                [onPayNow]="onPayNow.bind(this)">
              </app-financial-summary-tab>
            </div>
            
            <!-- Documents Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'documents'" *ngIf="activeTab === 'documents'">
              <app-financial-documents-tab></app-financial-documents-tab>
            </div>
            
            <!-- Earnings Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'earnings'" *ngIf="activeTab === 'earnings'">
              <app-financial-earnings-tab [earnings]="earnings"></app-financial-earnings-tab>
            </div>
            
            <!-- Royalties Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'royalties'" *ngIf="activeTab === 'royalties'">
              <app-financial-royalties-tab [royalties]="royalties"></app-financial-royalties-tab>
            </div>
            
            <!-- Payments Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'payments'" *ngIf="activeTab === 'payments'">
              <app-financial-payments-tab
                [payments]="payments"
                [paymentMethods]="paymentMethods"
                [payoutSettings]="payoutSettings"
                [supportedBanks]="supportedBanks"
                [addPaymentMethodForm]="addPaymentMethodForm"
                [onSubmitPaymentMethod]="onSubmitPaymentMethod.bind(this)"
                [onUpdatePayoutSettings]="onUpdatePayoutSettings.bind(this)">
              </app-financial-payments-tab>
            </div>
            
            <!-- Release Information Tab -->
            <div class="tab-pane" [class.active]="activeTab === 'release'" *ngIf="activeTab === 'release'">
              <app-financial-release-tab></app-financial-release-tab>
            </div>

            <!-- Admin-only tabs -->
            <div class="tab-pane" [class.active]="activeTab === 'new-royalty'" *ngIf="activeTab === 'new-royalty' && isAdmin">
              <app-new-royalty-form
                [newRoyaltyForm]="newRoyaltyForm"
                [onSubmitRoyalty]="onSubmitRoyalty.bind(this)">
              </app-new-royalty-form>
            </div>

            <div class="tab-pane" [class.active]="activeTab === 'new-payment'" *ngIf="activeTab === 'new-payment' && isAdmin">
              <app-new-payment-form
                [newPaymentForm]="newPaymentForm"
                [onSubmitPayment]="onSubmitPayment.bind(this)">
              </app-new-payment-form>
            </div>

            <div class="tab-pane" [class.active]="activeTab === 'new-earning'" *ngIf="activeTab === 'new-earning' && isAdmin">
              <app-new-earning-form
                [newEarningForm]="newEarningForm"
                [onSubmitEarning]="onSubmitEarning.bind(this)">
              </app-new-earning-form>
            </div>
            
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- No Artist Selected -->
    <div class="row" *ngIf="!selectedArtist">
      <div class="col-12">
        <div class="card">
          <div class="card-body text-center p-5">
            <i class="fa fa-money fa-4x text-muted mb-3"></i>
            <h4>No Artist Selected</h4>
            <p class="text-muted">Please select an artist from the dropdown above to view financial information.</p>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>
