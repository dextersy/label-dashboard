<div class="users-tab-layout">
  <!-- Sidebar Navigation (Desktop) / Top Navigation (Mobile) -->
  <nav class="users-tab-sidebar">
    <div class="sidebar-items">
      <button
        type="button"
        class="sidebar-item"
        [class.active]="activeSection === 'users'"
        (click)="setActiveSection('users')">
        <i class="fa-solid fa-users"></i>
        <span>Users</span>
      </button>
      <button
        type="button"
        class="sidebar-item"
        [class.active]="activeSection === 'login-attempts'"
        (click)="setActiveSection('login-attempts')">
        <i class="fa-solid fa-shield-halved"></i>
        <span>Login Attempts</span>
      </button>
    </div>
  </nav>

  <!-- Main Content Area -->
  <div class="users-tab-main">
    <!-- Users Table -->
    <div *ngIf="activeSection === 'users'">
      <app-paginated-table
        title="Users"
        [data]="displayUsers"
        [pagination]="usersPagination"
        [loading]="usersLoading"
        [columns]="usersColumns"
        [showSortableHeaders]="true"
        [actions]="usersActions"
        [headerActions]="headerActions"
        [sortInfo]="usersSort"
        (pageChange)="onUsersPageChange($event)"
        (filtersChange)="onUsersFiltersChange($event)"
        (sortChange)="onUsersSortChange($event)">
      </app-paginated-table>
    </div>

    <!-- Login Attempts Table -->
    <div *ngIf="activeSection === 'login-attempts'">
      <app-paginated-table
        title="Recent Login Attempts"
        [data]="loginAttempts"
        [pagination]="loginAttemptsPagination"
        [loading]="loginAttemptsLoading"
        [columns]="loginAttemptsColumns"
        [showSortableHeaders]="true"
        [sortInfo]="loginAttemptsSort"
        (pageChange)="onLoginAttemptsPageChange($event)"
        (filtersChange)="onLoginAttemptsFiltersChange($event)"
        (sortChange)="onLoginAttemptsSortChange($event)">
      </app-paginated-table>
    </div>
  </div>
</div>

<!-- Admin Invite Modal -->
<div class="modal fade" [class.show]="showInviteModal" [style.display]="showInviteModal ? 'block' : 'none'"
     tabindex="-1" role="dialog" aria-labelledby="inviteAdminModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="inviteAdminModalLabel">Invite Admin</h5>
        <button type="button" class="btn-close" (click)="closeInviteModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="sendInvite()">
          <div class="mb-3">
            <label for="email" class="form-label">Email Address *</label>
            <input type="email"
                   class="form-control"
                   id="email"
                   [(ngModel)]="inviteForm.email_address"
                   name="email"
                   required
                   placeholder="Enter email address">
          </div>
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input type="text"
                   class="form-control"
                   id="firstName"
                   [(ngModel)]="inviteForm.first_name"
                   name="firstName"
                   placeholder="Enter first name">
          </div>
          <div class="mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text"
                   class="form-control"
                   id="lastName"
                   [(ngModel)]="inviteForm.last_name"
                   name="lastName"
                   placeholder="Enter last name">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeInviteModal()">Cancel</button>
        <button type="button"
                class="btn btn-primary"
                (click)="sendInvite()"
                [disabled]="inviteLoading || !inviteForm.email_address.trim()">
          <span *ngIf="inviteLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Send Invitation
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="showInviteModal" *ngIf="showInviteModal"></div>
