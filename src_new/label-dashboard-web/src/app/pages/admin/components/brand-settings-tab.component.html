<form [formGroup]="brandForm" (ngSubmit)="saveBrandSettings()" *ngIf="brandSettings">
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header"><h5>General Settings</h5></div>
        <div class="card-body">
          <div class="form-group mb-3">
            <label for="logo">Logo</label><br>
            <img [src]="brandSettings.logo_url || 'assets/img/placeholder.jpg'" 
                 width="250" style="background-color:#cccccc; margin-bottom: 10px;"><br>
            <input type="file" class="form-control" id="logo" 
                   accept=".jpg,.png" (change)="onLogoFileSelected($event)" />
          </div>
          
          <div class="form-group mb-3">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" 
                   formControlName="name" placeholder="Brand Name">
          </div>
          
          <div class="form-group mb-3">
            <label for="brand_website">Website 
              <i class="fas fa-info-circle" title="This will be linked to your logo. Include http or https in the URL"></i>
            </label>
            <input type="text" class="form-control" id="brand_website" 
                   formControlName="brand_website" placeholder="Brand Website">
          </div>
          
          <div class="form-group mb-3">
            <label for="brand_color">Brand color 
              <span [style.color]="brandForm.get('brand_color')?.value">
                <i class="fas fa-square"></i>
              </span>
            </label>
            <select class="form-control" formControlName="brand_color">
              <option value="purple">Purple</option>
              <option value="red">Red</option>
              <option value="blue">Blue</option>
              <option value="azure">Azure</option>
              <option value="green">Green</option>
              <option value="black">Black</option>
              <option value="white">White</option>
            </select>
          </div>
          
          <div class="form-group mb-3">
            <label for="favicon">Favicon</label><br>
            <div class="input-group">
              <div class="input-group-text">
                <img [src]="brandSettings.favicon_url || 'assets/img/placeholder.jpg'" 
                     width="20" style="background-color:#cccccc;">
              </div>
              <input type="file" class="form-control" id="favicon" 
                     accept=".png" (change)="onFaviconFileSelected($event)" />
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card">
        <div class="card-header"><h5>Catalog</h5></div>
        <div class="card-body">
          <div class="form-group mb-3">
            <label for="catalog_prefix">Catalog Prefix 
              <i class="fas fa-info-circle" title="For autogenerated catalog number (e.g. CAT001)"></i>
            </label>
            <input type="text" class="form-control" id="catalog_prefix" 
                   formControlName="catalog_prefix" placeholder="Catalog Prefix">
          </div>
          
          <div class="form-group mb-3">
            <label for="release_submission_url">Release Submission URL 
              <i class="fas fa-info-circle" title="Link to the form where your artists should submit their releases."></i>
            </label>
            <input type="text" class="form-control" id="release_submission_url" 
                   formControlName="release_submission_url" placeholder="Release Submission URL">
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header"><h5>Payments</h5></div>
        <div class="card-body">
          <div class="form-group mb-3">
            <label for="processing_fee">Processing fee for payouts</label>
            <div class="input-group">
              <div class="input-group-text">â‚±</div>
              <input type="number" class="form-control" id="processing_fee" 
                     formControlName="payment_processing_fee_for_payouts" 
                     placeholder="Payment processing fee" min="0" step="0.01">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row save-panel mt-3">
    <button type="submit" class="btn btn-primary btn-block" [disabled]="loading">
      <i class="fas fa-save"></i> Save Changes
    </button>
  </div>
</form>

<!-- Domains Section -->
<hr>
<div class="row">
  <div class="col-md-4">
    <div class="card">
      <div class="card-header"><h3>Domains</h3></div>
      <div class="card-body">
        <p>These domains will resolve to your dashboard.</p>
        
        <div class="table-responsive" *ngIf="domains.length > 0">
          <table class="table">
            <tbody>
              <tr *ngFor="let domain of domains">
                <td>
                  <i [class]="getStatusIcon(domain.status)" 
                     [title]="getStatusTooltip(domain.status)"></i>
                  {{ domain.domain_name }}
                </td>
                <td>
                  <a *ngIf="domain.status !== 'Verified'" 
                     (click)="verifyDomain(domain.domain_name)" 
                     class="btn btn-link btn-sm"
                     title="Click to verify domain">
                    [ Verify ]
                  </a>
                  <span *ngIf="domain.status === 'Verified'" 
                        class="text-success small">
                    <i class="fas fa-check"></i> Verified
                  </span>
                  <a (click)="deleteDomain(domain.domain_name)" 
                     class="btn btn-link btn-sm text-danger ms-2"
                     title="Delete domain">
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div *ngIf="domains.length === 0">
          No domains configured.
        </div>
        
        <h4>Add domain</h4>
        <div class="input-group">
          <input type="text" class="form-control" [(ngModel)]="newDomainName" placeholder="Domain name">
          <button type="button" class="btn btn-primary" (click)="addDomain()">Add</button>
        </div>
      </div>
    </div>
  </div>
</div>