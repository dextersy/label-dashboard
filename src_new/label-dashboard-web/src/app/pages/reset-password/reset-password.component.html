<div class="login-wrapper fadeInDown">
  <!-- Form Header with Brand Logo -->
  <div id="formHeader" [style.background-color]="brandColor">
    <div class="fadeIn first">
      <img [src]="brandLogo" id="icon" [alt]="brandName" />
    </div>
  </div>

  <!-- Form Content -->
  <div id="formContent">
    <!-- Error Alert -->
    <div class="alert alert-danger" role="alert" *ngIf="error">
      {{ errorMessage }}
      <a (click)="goToLogin()">Please try again.</a>
    </div>
    
    <!-- Mismatch Error -->
    <div class="alert alert-danger" role="alert" *ngIf="!error && errorMessage">
      {{ errorMessage }}
    </div>

    <!-- Reset Password Form -->
    <div *ngIf="!error">
      <h3><strong>New Password, New You! âœ¨</strong></h3>
      <small class="text-muted">Please set your new password to complete your account recovery.</small>
      
      <form (ngSubmit)="onSubmit()" #resetForm="ngForm" novalidate>
        <div class="password-input-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            class="fadeIn second password-input"
            name="password"
            placeholder="New Password"
            [(ngModel)]="password"
            [disabled]="loading"
            required
          >
          <button
            type="button"
            class="password-toggle-btn"
            (click)="togglePasswordVisibility()"
            [disabled]="loading"
            tabindex="-1"
            aria-label="Toggle password visibility"
          >
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        <div class="password-input-wrapper">
          <input
            [type]="showValidation ? 'text' : 'password'"
            id="validation"
            class="fadeIn third password-input"
            name="validation"
            placeholder="Verify New Password"
            [(ngModel)]="validation"
            [disabled]="loading"
            required
          >
          <button
            type="button"
            class="password-toggle-btn"
            (click)="toggleValidationVisibility()"
            [disabled]="loading"
            tabindex="-1"
            aria-label="Toggle password visibility"
          >
            <i [class]="showValidation ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        <input
          type="submit"
          class="fadeIn fourth btn btn-primary btn-block"
          style="margin-top:20px;"
          [value]="loading ? 'Setting Password...' : 'Set New Password'"
          [disabled]="loading || !password || !validation"
        >
      </form>
    </div>
  </div>

  <!-- Form Footer -->
  <div id="formFooter">
    <a class="" (click)="goToLogin()">Back to login</a>
  </div>
</div>